---
title: "R Notebook"
output: html_notebook
---

# Load in data and view summary of each variable
```{r}
getwd()
crashes <- read.csv(
  "~/Desktop/STAT544/Crashes.csv",
  na.strings = c("", " ", "  ", "   ", "-", " - ", "- " ,"NA", "N/A", "NULL", "null", "Unknown", "UNKNOWN", "UNK")
)
```

#check for duplicates: all are unique
```{r}
duplicates_num = sum(duplicated(crashes)) 
duplicates_num
```

#Finding the percentage of missing info from each variable.
# For the variables missing 30% or more of the data, we will delete. (we deleted 5 variables)
```{r}
# percentage missing for each column
missing_pct <- colMeans(is.na(crashes)) * 100

# look at them, sorted high → low
sort(round(missing_pct, 2), decreasing = TRUE)

# choose a threshold for "too much" missingness
high_miss_threshold <- 30  # percent

# names of variables with > 30% missing
high_miss_vars <- names(missing_pct)[missing_pct > high_miss_threshold]

high_miss_vars   # just to see which ones they are

crashes_red <- crashes[, !(names(crashes) %in% high_miss_vars)]
```
#check new percentages
```{r}
# percentage missing for each column
missing_pct <- colMeans(is.na(crashes_red)) * 100

# look at them, sorted high → low
sort(round(missing_pct, 2), decreasing = TRUE)

```

# Get rid of variables we previously agreed to drop in case it wasnt dropped previously
```{r}
# Vector of deprecated variables (from codebook)
vars_to_remove <- c(
  "CASE_ID",
  "ACCIDENT_YEAR",
  "PROC_DATE",
  "OFFICER_ID",
  "ROUTE_SUFFIX",
  "POSTMILE_PREFIX",
  "REPORTING_DISTRICT"
)

# Remove only those that actually exist in your dataset
vars_to_remove <- vars_to_remove[vars_to_remove %in% names(crashes)]

# Drop them
crashes_red <- crashes_red[, !(names(crashes_red) %in% vars_to_remove)]

# Check new dimensions
dim(crashes_red)
```

#change variables with responses Y or N to ones and zeros (respectively)
```{r}
# Find columns that contain only Y/N (ignoring NA)
yn_cols <- names(crashes_red)[
  sapply(crashes_red, function(x) {
    if (is.character(x) || is.factor(x)) {
      vals <- unique(na.omit(x))
      all(vals %in% c("Y", "N"))
    } else FALSE
  })
]

# Convert them
crashes_red[yn_cols] <- lapply(crashes_red[yn_cols], function(x) {
  x <- as.character(x)
  ifelse(x == "Y", 1,
         ifelse(x == "N", 0, NA))
})
```

#let's look at frequency tables/bar charts

#correlation
```{r}

```


#skewness

#outliers

#Define severe accidentS
```{r}

```


#find SIGNIFICANT FEATURES USING T-TESTS or hypothesis tests
